/*
 演習7-16 要素数をキーボードから読み込み double型の配列を動的に生成する 生成に失敗したときの処理も行う

 作成日 2017年5月8日

 作成者 平澤敬介
 */

#include<iostream>
// 空ポインタ定数を定義しているライブラリ 0 のこと
#include<new>

using namespace std;

int main() {
	//不測の事態がない限りループし続けます
	while (true) {

		// ループごとに中の処理が行われます
		try {
			// double型の配列を動的に生成します
			double* x = new double[30000];
			x[0] = 0;

			delete x;
		// 不測の事態 配列の生成に失敗した場合
		} catch (bad_alloc) {

			//警告文 失敗しました
			cout << "配列の生成に失敗しました。プログラムを終了します。\n";

			//
			return 1;
		}
	}
	return 0;
}
// 例外発生を抑制させるのはまずい
//例外を発生させ拾う方が良い
